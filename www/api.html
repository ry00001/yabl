<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Yet Another Bot List</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/style.css">
    </head>
    <body>
        <div class="navbar">
            <div class="listitem home" onclick="home()">
              <div class="hover"></div>
              <p class="navtext text">YABL</p>
            </div>
            <div class="rightnav">
                <div class="listitem search">
                    <input class="searchbox inputbox" placeholder="Search" onenter="search"></div>
                </div>
                <div class="listitem login" onclick="login()">
                  <div class="hover"></div>
                  <p class="navtext text"><i class="fas fa-sign-in-alt"></i></p>
                </div>
                <div class="listitem logout" onclick="logout()">
                  <div class="hover"></div>
                  <p class="navtext text"><i class="fas fa-sign-out-alt"></i></p>
                </div>
                <div class="listitem addbot" onclick="addbot()">
                  <div class="hover"></div>
                  <p class="navtext text"><i class="fas fa-plus-circle"></i></p>
                </div>
                <div class="listitem verifynav" onclick="verify()">
                    <div class="hover"></div>
                    <p class="navtext text"><i class="fas fa-user-check"></i></p>
                  </div>
                <div class="listitem profile" onclick="profile()">
                  <div class="hover"></div>
                  <p class="navtext text"><i class="fas fa-user-circle"></i></p>
                </div>
            </div>
        </div>
        <div class="pagecontent apicontent">
          <p class="header text apiheader" >API Documentation</p><br/>
          <input class="inputbox" id="apikey" placeholder="API token" disabled></input>
          <button class="inputbox searchbutton" id="revealkey" onclick="reveal()">Reveal</button>
          <p class="text apiheader"><br/>
              The base URL for all REST requests is https://yabl.xyz/api<br/>
              <br/>
<div class="text">
    <a name="apiwhoami" class="text subheader">/api/whoami&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: User Token<br/>
    Returns information about a user token.&nbsp;<br/>
    <pre>> GET /api/whoami
&lt; 200
&lt; {admin: true
&lt;  avatar: "e4cafdbf4cae648e2883560a426838f7"
&lt;  discriminator: "4738"
&lt;  flags: 768
&lt;  id: "153353572711530496"
&lt;  locale: "en-US"
&lt;  mfa_enabled: true
&lt;  premium_type: 1
&lt;  username: "! craftxbox"}
    </pre><br/>
    <a name="apiinvalidate" class="text subheader">/api/token/invalidate&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: API Token<br/>
    Invalidates an API token.&nbsp;<br/>
    <pre>> POST /api/token/invalidate
&lt; 200
&lt; Token invalidated belonging to 153353572711530496
    </pre><br/>
    <a name="apigenerate" class="text subheader">/api/token/generate&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: User Token<br/>
    Generates or returns an API token.&nbsp;<br/>
    <pre>> POST /api/token/generate
&lt; 200
&lt; F6Uh8DqwjiK32ajFGK2AzucTJFn6fKqIscCoGoYYlXcDd4FpGf8JHOqTQkhQAD4m
    </pre><br/>
    <a name="apibot" class="text subheader">/api/bot/&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: None<br/>
    Returns a bot object.&nbsp;<br/>
    <pre>> GET /api/bot/321493510241124363
&lt; 200
&lt; {"id" : "321493510241124363",
&lt;    "prefix" : "c;",
&lt;    "help" : "c;help",
&lt;    "desc" : "Craftxbot is a...",
&lt;    "body" : "# Craftxbot  ... ",
&lt;    "website" : "https://craftxbot.discord.bot",
&lt;    "support" : "https://discord.gg/jcYq5ch",
&lt;    "git" : null,
&lt;    "library" : "Discord4J",
&lt;    "modnote" : null,
&lt;    "verified" : true,
&lt;    "owners" : {
&lt;        "153353572711530496" : "! craftxbox#4738"
&lt;    },
&lt;    "username" : "craftxbot",
&lt;    "avatar" : "6f12e0c5f5270a9dcf3104ba7fc651cc",
&lt;    "guildCount" : 418}
    </pre><br/>
    <a name="apiadd" class="text subheader">/api/bot/add&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: User token<br/>
    Submits a new bot.&nbsp;<br/>
    <pre>> POST /api/bot/add
&gt; {"id" : "321493510241124363",
&gt;    "prefix" : "c;",
&gt;    "help" : "c;help",
&gt;    "desc" : "Craftxbot is a...",
&gt;    "body" : "# Craftxbot  ... ",
&gt;    "website" : "https://craftxbot.discord.bot",
&gt;    "support" : "https://discord.gg/jcYq5ch",
&gt;    "git" : null,
&gt;    "library" : "Discord4J",
&gt;    "modnote" : null}
&lt; 201
&lt; &lt;the previous document&gt;
    </pre><br/>
    <a name="apiedit" class="text subheader">/api/bot/edit/&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: User token<br/>
    Edits an existing bot.&nbsp;<br/>
    <pre>> POST /api/bot/edit/321493510241124363
&gt; {"id" : "321493510241124363",
&gt;    "prefix" : "c;",
&gt;    "help" : "c;help",
&gt;    "desc" : "Craftxbot is a...",
&gt;    "body" : "# Craftxbot  ... ",
&gt;    "website" : "https://craftxbot.discord.bot",
&gt;    "support" : "https://discord.gg/jcYq5ch",
&gt;    "git" : null,
&gt;    "library" : "Discord4J",
&gt;    "modnote" : null}
&lt; 200
&lt; &lt;the previous document&gt;
    </pre><br/>
    <a name="apistats" class="text subheader">/api/bot/stats/&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: API token<br/>
    Changes bot guild statistics.&nbsp;<br/>
    <pre>> POST /api/bot/stats/321493510241124363
&gt; {"guildCount":418}
&lt; 200
&lt; &lt;bot object&gt;
    </pre><br/>
    <a name="apidelete" class="text subheader">/api/bot/delete/&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: User token<br/>
    Deletes a bot.&nbsp;<br/>
    <pre>> POST /api/bot/delete/321493510241124363
&lt; 200
&lt; Bot deleted.
    </pre><br/>
    <a name="apiverify" class="text subheader">/api/bot/verify/&nbsp;</a><br/>
    Method: POST<br/>
    Authorization: Administrator user token<br/>
    Verifies a bot.&nbsp;<br/>
    <pre>> POST /api/bot/verify/321493510241124363
&lt; 200
&lt; Bot verified.
    </pre><br/>
    <a name="apibots" class="text subheader">/api/bots&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: None<br/>
    Returns 20 random bots.&nbsp;<br/>
    <pre>> GET /api/bots
&lt; 200
&lt; &lt;an array of bot objects&gt;
    </pre><br/>
    <a name="apiuserme" class="text subheader">/api/bots/user/@me&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: User token<br/>
    Returns all of your bots, aswell as information about you.&nbsp;<br/>
    <pre>> GET /api/bots/user/@me
&lt; 200
&lt; {"id":"153353572711530496",
&lt; "userscrim":"! craftxbox#4738",
&lt; "avatar":"e4cafdbf4cae648e2883560a426838f7",
&lt; "bots":[&lt;bot object&gt;]}
    </pre><br/>
    <a name="apiuser" class="text subheader">/api/bots/user/&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: None<br/>
    Returns all of a users bots, aswell as information about them.&nbsp;<br/>
    <pre>> GET /api/bots/user/153353572711530496
&lt; 200
&lt; {"id":"153353572711530496",
&lt; "userscrim":"! craftxbox#4738",
&lt; "avatar":"e4cafdbf4cae648e2883560a426838f7",
&lt; "bots":[&lt;bot object&gt;]}
    </pre><br/>
    <a name="apiall" class="text subheader">/api/bots/all&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: Any token<br/>
    Returns an array of every bot on the list.&nbsp;<br/>
    <pre>> GET /api/bots/all
&lt; 200
&lt; [&lt;bot object&gt;]
    </pre><br/>
    <a name="apipage" class="text subheader">/api/bots/page&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: None<br/>
    Searches for bots matching a query, Paginated to 20 bots per page.&nbsp;<br/>
    <pre>> GET /api/bots/page
> {"search":"craftxbot","page":0}
&lt; 200
&lt; {"results":1,
&lt; "pages":0,
&lt; "bots":[&lt;bot object&gt;]}
    </pre><br/>
    <a name="apiunverified" class="text subheader">/api/bots/unverified&nbsp;</a><br/>
    Method: GET<br/>
    Authorization: Any token<br/>
    Returns unverified bots, paginated to 20 bots per page&nbsp;<br/>
    <pre>> GET /api/bots/unverified
> {"page":0}
&lt; 200
&lt; {"results":1,
&lt; "pages":0,
&lt; "bots":[&lt;bot object&gt;]}
    </pre><br/>
</div>
            </p>
            <p class="apiindex">
              <a href="#apiwhoami">/api/whoami</a><br/>
              <a href="#apiinvalidate">/api/token/invalidate</a><br/>
              <a href="#apigenerate">/api/token/generate</a><br/>
              <a href="#apibot">/api/bot/</a><br/>
              <a href="#apiadd">/api/bot/add</a><br/>
              <a href="#apiedit">/api/bot/edit</a><br/>
              <a href="#apistats">/api/bot/stats</a><br/>
              <a href="#apidelete">/api/bot/delete</a><br/>
              <a href="#apiverify">/api/bot/verify</a><br/>
              <a href="#apibots">/api/bots/</a><br/>
              <a href="#apiuserme">/api/bots/user/@me</a><br/>
              <a href="#apiuser">/api/bots/user/</a><br/>
              <a href="#apiall">/api/bots/all</a><br/>
              <a href="#apipage">/api/bots/page</a><br/>
              <a href="#apiunverified">/api/bots/unverified</a><br/>
            </p>
        </div>
        
        <div class="footer">
            <p class="footitem text">&#169; YABL team 2018, built with java and html.</p>
            <p class="footitem text"><a href="/terms">Terms</a>|<a href="https://github.com/yabl-team">Github</a>|<a href="/api">API</a></p>
        </div>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            var baseUrl = window.location.protocol +"//"+ window.location.hostname
            if(window.localStorage.getItem("token") != null){
              document.querySelector(".listitem.login").style.display = "none"
            } else{
              document.querySelector(".listitem.logout").style.display = "none"
              document.querySelector(".listitem.addbot").style.display = "none"
              document.querySelector(".listitem.profile").style.display = "none"
            }
            function login(){
              window.location.href = baseUrl + "/login";
            }
            function logout(){
              window.localStorage.removeItem("token");
              window.location.reload();
            }
            function addbot(){
              window.location.href = baseUrl + "/add";
            }
            function profile(){
              window.location.href = baseUrl + "/dashboard";
            }
            function home(){
                window.location.href = baseUrl;
            }
            var instance = axios.create({validateStatus: a => {return true;}});
            var whoami = null;
            if(localStorage.getItem("token") !== null){
              instance.get(baseUrl+"/api/whoami",{"headers":{"Content-Type":"application/json","Authorization":localStorage.getItem("token")}}).then(function(response){whoami = response.data
                if(!whoami.admin) document.querySelector(".listitem.verifynav").style.display = "none"
              }).catch();
            } else{
              apikey.style.display = "none"
              revealkey.style.display = "none"
              document.querySelector(".listitem.verifynav").style.display = "none"
            }
            function verify(){
              window.location.href = baseUrl + "/verify";
            }
            document.querySelector(".searchbox").addEventListener("keyup", function(event) {
              event.preventDefault();
              if (event.keyCode === 13) {
                window.location.href = baseUrl + "/search?query="+encodeURI(document.querySelector(".searchbox").value);
              }
            });
            function reveal(){
              instance.get(baseUrl+"/api/token/generate",{"headers":{"Content-Type":"application/json","Authorization":localStorage.getItem("token")}}).then(function(response){
                var token = response.data
                apikey.value = token
                revealkey.disabled = true
                revealkey.textContent = "Revealed"
              }).catch();
            }
        </script>
    </body>
</html>